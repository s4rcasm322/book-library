(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50581810"],{"2cfe":function(e,o,t){"use strict";var a=t("6e98"),s=t.n(a);s.a},"6e98":function(e,o,t){},"927c":function(e,o,t){"use strict";t.r(o);var a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"add-book"},[t("div",{staticClass:"container"},[t("header",{staticClass:"add-book__header"},[t("a",{staticClass:"add-book__back",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),e.$router.push("/")}}},[e._v("Назад")]),t("h2",{staticClass:"add-book__title"},[e._v("Добавлений новой книги")])]),t("div",{staticClass:"add-book__content"},[t("photo-uploader",{staticClass:"add-book__upload",on:{upload:function(o){e.newBook.img=o},remove:function(o){e.newBook.img=""}}}),t("van-cell-group",{staticClass:"add-book__fields"},[t("van-field",{staticClass:"add-book__field",attrs:{required:"",clearable:"",maxlength:"30","show-word-limit":"","label-width":"115",label:"Название",placeholder:"Название","error-message":e.errors.title?e.errors.title:""},model:{value:e.newBook.title,callback:function(o){e.$set(e.newBook,"title",o)},expression:"newBook.title"}}),t("van-field",{staticClass:"add-book__field",attrs:{required:"",clearable:"",maxlength:"20","show-word-limit":"","label-width":"115",label:"Имя автора",placeholder:"Имя автора","error-message":e.errors.firstName?e.errors.firstName:""},model:{value:e.newBook.author.firstName,callback:function(o){e.$set(e.newBook.author,"firstName",o)},expression:"newBook.author.firstName"}}),t("van-field",{staticClass:"add-book__field",attrs:{required:"",clearable:"",maxlength:"20","show-word-limit":"","label-width":"115",label:"Фамилия автора",placeholder:"Фамилия автора","error-message":e.errors.lastName?e.errors.lastName:""},model:{value:e.newBook.author.lastName,callback:function(o){e.$set(e.newBook.author,"lastName",o)},expression:"newBook.author.lastName"}}),t("van-field",{staticClass:"add-book__field",attrs:{clearable:"",maxlength:"30","show-word-limit":"","label-width":"115",label:"Издательство",placeholder:"Издательство"},model:{value:e.newBook.publisher,callback:function(o){e.$set(e.newBook,"publisher",o)},expression:"newBook.publisher"}}),t("van-field",{staticClass:"add-book__field",attrs:{"label-width":"115",label:"Год публикации","error-message":e.errors.publishDate?e.errors.publishDate:""}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newBook.publishDate,expression:"newBook.publishDate"},{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],staticClass:"van-field__control",attrs:{slot:"input",type:"tel",placeholder:"Год публикации"},domProps:{value:e.newBook.publishDate},on:{input:function(o){o.target.composing||e.$set(e.newBook,"publishDate",o.target.value)}},slot:"input"})]),t("van-field",{staticClass:"add-book__field",attrs:{"label-width":"115",label:"Дата выхода в тираж","error-message":e.errors.releaseDate?e.errors.releaseDate:""}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newBook.releaseDate,expression:"newBook.releaseDate"},{name:"mask",rawName:"v-mask",value:"##.##.####",expression:"'##.##.####'"}],staticClass:"van-field__control",attrs:{slot:"input",type:"tel",placeholder:"Дата выхода в тираж"},domProps:{value:e.newBook.releaseDate},on:{input:function(o){o.target.composing||e.$set(e.newBook,"releaseDate",o.target.value)}},slot:"input"})]),t("van-field",{staticClass:"add-book__field",attrs:{required:"","label-width":"115",label:"Кол-во страниц","error-message":e.errors.pages?e.errors.pages:""}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newBook.pages,expression:"newBook.pages"},{name:"mask",rawName:"v-mask",value:"#####",expression:"'#####'"}],staticClass:"van-field__control",attrs:{slot:"input",type:"number",min:"1",max:"10000",placeholder:"Кол-во страниц"},domProps:{value:e.newBook.pages},on:{input:function(o){o.target.composing||e.$set(e.newBook,"pages",o.target.value)}},slot:"input"})])],1)],1),t("div",{staticClass:"add-book__actions"},[t("van-button",{staticClass:"add-book__action",attrs:{type:"primary"},on:{click:e.addBook}},[e._v("Добавить")]),t("van-button",{staticClass:"add-book__action add-book__action--cancel",attrs:{type:"default"},on:{click:function(o){return e.$router.push("/")}}},[e._v("Отмена")])],1)])])},s=[],r=(t("0d03"),t("a9e3"),t("4fad"),t("498a"),t("4795"),t("fe05")),l={name:"add-book",components:{PhotoUploader:r["a"]},data:function(){return{newBook:{title:"",author:{firstName:"",lastName:""},pages:"",publishDate:"",releaseDate:"",publisher:"",img:""},errors:{}}},computed:{books:{get:function(){return this.$store.state.books},set:function(e){this.$store.commit("SET_BOOKS",e)}}},methods:{falidateForm:function(){this.errors={},""===this.newBook.title.trim()&&(this.errors.title="Название должно быть заполнено!"),""===this.newBook.author.firstName.trim()&&(this.errors.firstName="Имя автора должно быть заполнено!"),""===this.newBook.author.lastName.trim()&&(this.errors.lastName="Фамилия автора должна быть заполнено!"),this.newBook.publishDate&&Number(this.newBook.publishDate)<1800&&(this.errors.publishDate="Год публикации должен быть не меньше 1800!"),new Date(this.newBook.releaseDate)<new Date("01.01.1800")&&(this.errors.releaseDate="Тираж не может датироваться ранее 01.01.1800!"),(this.newBook.pages>1e4||Number(this.newBook.pages)<=0)&&(this.errors.pages="Кол-во страниц не может быть меньше 0 и превышать 10000")},addBook:function(){var e=this;this.falidateForm(),0===Object.entries(this.errors).length&&(this.$spreloader.show(),setTimeout((function(){e.books.length>0?e.newBook.id=e.books[e.books.length-1].id+1:e.newBook.id=1,e.books.push(e.newBook),window.localStorage.setItem("books",JSON.stringify(e.books)),e.$spreloader.hide(),e.$router.push("/")}),500))}},created:function(){var e=JSON.parse(window.localStorage.getItem("books"));e&&0===this.books.length&&(this.books=e)}},i=l,n=(t("2cfe"),t("2877")),d=Object(n["a"])(i,a,s,!1,null,"34cfaa9c",null);o["default"]=d.exports}}]);
//# sourceMappingURL=chunk-50581810.6c54f591.js.map