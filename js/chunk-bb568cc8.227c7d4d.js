(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb568cc8"],{"0478":function(t,e,a){"use strict";var s=a("66f1"),i=a.n(s);i.a},"14c3":function(t,e,a){var s=a("c6b6"),i=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var r=a.call(t,e);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==s(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},5319:function(t,e,a){"use strict";var s=a("d784"),i=a("825a"),r=a("7b0b"),o=a("50c4"),l=a("a691"),n=a("1d80"),c=a("8aa5"),d=a("14c3"),u=Math.max,f=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};s("replace",2,(function(t,e,a){return[function(a,s){var i=n(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,i,s):e.call(String(i),a,s)},function(t,r){var n=a(e,t,this,r);if(n.done)return n.value;var p=i(t),h=String(this),v="function"===typeof r;v||(r=String(r));var m=p.global;if(m){var g=p.unicode;p.lastIndex=0}var _=[];while(1){var k=d(p,h);if(null===k)break;if(_.push(k),!m)break;var x=String(k[0]);""===x&&(p.lastIndex=c(h,o(p.lastIndex),g))}for(var w="",C=0,N=0;N<_.length;N++){k=_[N];for(var y=String(k[0]),$=u(f(l(k.index),h.length),0),D=[],E=1;E<k.length;E++)D.push(b(k[E]));var S=k.groups;if(v){var I=[y].concat(D,$,h);void 0!==S&&I.push(S);var O=String(r.apply(void 0,I))}else O=s(y,h,$,D,S,r);$>=C&&(w+=h.slice(C,$)+O,C=$+y.length)}return w+h.slice(C)}];function s(t,a,s,i,o,l){var n=s+t.length,c=i.length,d=v;return void 0!==o&&(o=r(o),d=h),e.call(l,d,(function(e,r){var l;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,s);case"'":return a.slice(n);case"<":l=o[r.slice(1,-1)];break;default:var d=+r;if(0===d)return e;if(d>c){var u=p(d/10);return 0===u?e:u<=c?void 0===i[u-1]?r.charAt(1):i[u-1]+r.charAt(1):e}l=i[d-1]}return void 0===l?"":l}))}}))},"66f1":function(t,e,a){},"7db0":function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").find,r=a("44d2"),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),s({target:"Array",proto:!0,forced:l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)},"8aa5":function(t,e,a){"use strict";var s=a("6547").charAt;t.exports=function(t,e,a){return e+(a?s(t,e).length:1)}},"8bf3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"book"},[s("div",{staticClass:"container"},[s("header",{staticClass:"book__header"},[s("a",{staticClass:"book__back",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$router.push("/")}}},[t._v("Назад")]),s("h2",{staticClass:"book__header-title"},[t._v(t._s(t.isEdit?"Редактирование":"Подробности"))])]),s("div",{staticClass:"book__content"},[t.isEdit?s("photo-uploader",{staticClass:"book__upload",attrs:{photo:t.details.img},on:{upload:function(e){t.details.img=e},remove:function(e){t.details.img=e}}}):s("div",{staticClass:"book__img",style:{backgroundImage:"url("+(t.details.img||a("bd21"))+")"}}),t.isEdit?s("van-cell-group",{staticClass:"book__fields"},[s("van-field",{staticClass:"book__field",attrs:{required:"",clearable:"",maxlength:"30","show-word-limit":"","label-width":"115",label:"Название",placeholder:"Название","error-message":t.errors.title?t.errors.title:""},model:{value:t.details.title,callback:function(e){t.$set(t.details,"title",e)},expression:"details.title"}}),s("van-field",{staticClass:"book__field",attrs:{required:"",clearable:"",maxlength:"20","show-word-limit":"","label-width":"115",label:"Имя автора",placeholder:"Имя автора","error-message":t.errors.firstName?t.errors.firstName:""},model:{value:t.details.author.firstName,callback:function(e){t.$set(t.details.author,"firstName",e)},expression:"details.author.firstName"}}),s("van-field",{staticClass:"book__field",attrs:{required:"",clearable:"",maxlength:"20","show-word-limit":"","label-width":"115",label:"Фамилия автора",placeholder:"Фамилия автора","error-message":t.errors.lastName?t.errors.lastName:""},model:{value:t.details.author.lastName,callback:function(e){t.$set(t.details.author,"lastName",e)},expression:"details.author.lastName"}}),s("van-field",{staticClass:"book__field",attrs:{clearable:"",maxlength:"30","show-word-limit":"","label-width":"115",label:"Издательство",placeholder:"Издательство"},model:{value:t.details.publisher,callback:function(e){t.$set(t.details,"publisher",e)},expression:"details.publisher"}}),s("van-field",{staticClass:"book__field",attrs:{"label-width":"115",label:"Год публикации","error-message":t.errors.publishDate?t.errors.publishDate:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.details.publishDate,expression:"details.publishDate"},{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],staticClass:"van-field__control",attrs:{slot:"input",type:"tel",placeholder:"Год публикации"},domProps:{value:t.details.publishDate},on:{input:function(e){e.target.composing||t.$set(t.details,"publishDate",e.target.value)}},slot:"input"})]),s("van-field",{staticClass:"book__field",attrs:{"label-width":"115",label:"Дата выхода в тираж","error-message":t.errors.releaseDate?t.errors.releaseDate:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.details.releaseDate,expression:"details.releaseDate"},{name:"mask",rawName:"v-mask",value:"##.##.####",expression:"'##.##.####'"}],staticClass:"van-field__control",attrs:{slot:"input",type:"tel",placeholder:"Дата выхода в тираж"},domProps:{value:t.details.releaseDate},on:{input:function(e){e.target.composing||t.$set(t.details,"releaseDate",e.target.value)}},slot:"input"})]),s("van-field",{staticClass:"book__field",attrs:{required:"","label-width":"115",label:"Кол-во страниц","error-message":t.errors.pages?t.errors.pages:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.details.pages,expression:"details.pages"},{name:"mask",rawName:"v-mask",value:"#####",expression:"'#####'"}],staticClass:"van-field__control",attrs:{slot:"input",type:"number",min:"1",max:"10000",placeholder:"Кол-во страниц"},domProps:{value:t.details.pages},on:{input:function(e){e.target.composing||t.$set(t.details,"pages",e.target.value)}},slot:"input"})])],1):s("div",{staticClass:"book__info"},[s("h3",{staticClass:"book__info-text book__info-text--title"},[t._v(t._s(t.details.title||"Название отсутсвует"))]),s("h4",{staticClass:"book__info-text book__info-text--author"},[t._v(" "+t._s(t.details.author.firstName||t.details.author.lastName?t.details.author.firstName+" "+t.details.author.lastName:"Автор незивестен")+" ")]),s("span",{staticClass:"book__info-text"},[t._v("Издательство: "+t._s(t.details.publisher||"Информация отсутствует"))]),s("time",{staticClass:"book__info-text"},[t._v("Год публикации: "+t._s(t.details.publishDate||"Информация отсутствует"))]),s("time",{staticClass:"book__info-text"},[t._v("Дата выхода в тираж: "+t._s(t.details.releaseDate||"Информация отсутствует"))]),s("span",{staticClass:"book__info-text"},[t._v("Cтраниц: "+t._s(t.details.pages||"Информация отсутствует"))])])],1),t.isEdit?s("div",{staticClass:"book__actions"},[s("van-button",{staticClass:"book__action",attrs:{type:"info"},on:{click:t.saveBook}},[t._v("Сохранить")]),s("van-button",{staticClass:"book__action book__action--cancel",attrs:{type:"default"},on:{click:t.cancelEdit}},[t._v("Отмена")])],1):s("div",{staticClass:"book__actions"},[s("van-button",{staticClass:"book__action",attrs:{type:"info"},on:{click:function(e){t.isEdit=!0,t.$router.replace("/book/"+t.id+"/"+!0)}}},[t._v("Редактировать")]),s("van-button",{staticClass:"book__action book__action--cancel",attrs:{type:"default"},on:{click:t.removeBook}},[t._v("Удалить")])],1)])])},i=[],r=(a("4de4"),a("7db0"),a("d81d"),a("0d03"),a("a9e3"),a("4fad"),a("ac1f"),a("5319"),a("498a"),a("4795"),a("fe05")),o={name:"book",components:{PhotoUploader:r["a"]},props:["isEditing","id"],data:function(){return{isEdit:this.isEditing,details:{},errors:{}}},computed:{books:{get:function(){return this.$store.state.books},set:function(t){this.$store.commit("SET_BOOKS",t)}}},methods:{falidateForm:function(){this.errors={},""===this.details.title.trim()&&(this.errors.title="Название должно быть заполнено!"),""===this.details.author.firstName.trim()&&(this.errors.firstName="Имя автора должно быть заполнено!"),""===this.details.author.lastName.trim()&&(this.errors.lastName="Фамилия автора должна быть заполнено!"),this.details.publishDate&&Number(this.details.publishDate)<1800&&(this.errors.publishDate="Год публикации должен быть не меньше 1800!"),new Date(this.details.releaseDate)<new Date("01.01.1800")&&(this.errors.releaseDate="Тираж не может датироваться ранее 01.01.1800!"),(this.details.pages>1e4||Number(this.details.pages)<=0)&&(this.errors.pages="Кол-во страниц не может быть меньше 0 и превышать 10000")},cancelEdit:function(){this.isEdit=!1,this.$router.replace("/book/".concat(this.id)),this.getBookDetails()},saveBook:function(){var t=this;this.falidateForm(),0===Object.entries(this.errors).length&&(this.$spreloader.show(),setTimeout((function(){t.books=t.books.map((function(e){return e.id===t.details.id&&(e=t.details),e})),window.localStorage.setItem("books",JSON.stringify(t.books)),t.isEdit=!1,t.$router.replace("/book/".concat(t.id)),t.$spreloader.hide()}),500))},removeBook:function(){var t=this;this.$spreloader.show(),setTimeout((function(){t.books=t.books.filter((function(e){return e.id!==t.details.id})),window.localStorage.setItem("books",JSON.stringify(t.books)),t.$spreloader.hide(),t.$router.push("/")}),500)},getBookDetails:function(){var t=this;this.details=Object.assign({},this.books.find((function(e){return e.id==t.id})))}},created:function(){var t=JSON.parse(window.localStorage.getItem("books"));t&&0===this.books.length&&(this.books=t),this.getBookDetails()}},l=o,n=(a("0478"),a("2877")),c=Object(n["a"])(l,s,i,!1,null,"282c3b46",null);e["default"]=c.exports},9263:function(t,e,a){"use strict";var s=a("ad6d"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,l=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),n=void 0!==/()??/.exec("")[1],c=l||n;c&&(o=function(t){var e,a,o,c,d=this;return n&&(a=new RegExp("^"+d.source+"$(?!\\s)",s.call(d))),l&&(e=d.lastIndex),o=i.call(d,t),l&&o&&(d.lastIndex=d.global?o.index+o[0].length:e),n&&o&&o.length>1&&r.call(o[0],a,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(o[c]=void 0)})),o}),t.exports=o},ac1f:function(t,e,a){"use strict";var s=a("23e7"),i=a("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,a){"use strict";var s=a("825a");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d784:function(t,e,a){"use strict";var s=a("9112"),i=a("6eeb"),r=a("d039"),o=a("b622"),l=a("9263"),n=o("species"),c=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,u){var f=o(t),p=!r((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),h=p&&!r((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[n]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return e=!0,null},a[f](""),!e}));if(!p||!h||"replace"===t&&!c||"split"===t&&!d){var v=/./[f],b=a(f,""[t],(function(t,e,a,s,i){return e.exec===l?p&&!i?{done:!0,value:v.call(e,a,s)}:{done:!0,value:t.call(a,e,s)}:{done:!1}})),m=b[0],g=b[1];i(String.prototype,t,m),i(RegExp.prototype,f,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)}),u&&s(RegExp.prototype[f],"sham",!0)}}},d81d:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").map,r=a("1dde");s({target:"Array",proto:!0,forced:!r("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-bb568cc8.227c7d4d.js.map